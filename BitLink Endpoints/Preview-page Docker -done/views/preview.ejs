<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BitLink Link.</title>
    <link rel="stylesheet" href="https://storage.cloud.google.com/preview_page_static_files/style.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tilt+Warp&display=swap');

        body {
            background-color: #F8FAFB;
            font-family: 'Tilt Warp', cursive;
            color: #000000;
            display: flex;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            width: 100%;
            box-sizing: border-box;
            overflow: auto;
            padding-top: 60px;
        }

        a {
            -webkit-tap-highlight-color: transparent;
        }

        main {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            height: auto;
            padding-bottom: 60px;
            position: relative;
            text-align: center;
            margin-top: 40px;
        }

        #avatar-container img {
            width: 125px;
            height: 125px;
            border-radius: 65px;
        }

        #title-page {
            background: #374957;
            color: #F8FAFB;
            font-size: 18px;
            width: 100%;
            height: 40px;
            border-radius: 12px;
            margin-top: 11px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.49);
            width: 250px;
        }

        #title-page input {
            font-family: 'Tilt Warp', cursive;
            color: #F8FAFB;
            font-size: 18px;
            background: #374957;
            border: none;
            outline: none;
            border: 0;
            text-align: center;
        }

        .link-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 185px;
            width: 100%;
        }

        .link-div {
            display: flex;
            margin-bottom: 10px;
            width: 320px;
            border-radius: 12px;
            align-items: center;
        }

        .link-div img {
            width: 50px;
            height: 50px;
            background: #374957;
            padding: 8px;
            border-radius: 12px;
            box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.49);
            margin-right: 13px;
        }

        .link-div a {
            width: 100%;
            text-decoration: none;
            color: #F8FAFB;
            font-size: 14px;
            background: #374957;
            align-items: center;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.49);
            margin-right: 5px;
        }

        /* Title section jadi unscrollable */
        .title-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            flex-direction: column;
            align-items: center;
            background-color: #F8FAFB;
            box-shadow: 0px -1px 4px 4px rgba(0, 0, 0, 0.3);
        }
        /*  */

        /* Search */
        #search-bar-container {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            top: 0;
            left: 0;
            padding: 10px;
            background-color: rgba(248, 250, 251, 0.7);
            position: relative;
            margin-top: 13px;
        }

        #search-input {
            font-family: 'Tilt Warp', cursive;
            height: 24px;
            width: 70%; 
            border-radius: 12px;
            border: none;
            padding-left: 40px;
            box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.49);
        }

        #search-icon {
            height: 14px;
            width: auto;
            margin-left: 10px;
            position: absolute;
            left: 70px;
            top: 50%;
            transform: translateY(-50%);
        }

        @keyframes blink {
            0%   {background-color: transparent;}
            50%  {background-color: yellow;}
            100% {background-color: transparent;}
        }

        .blink {
            animation: blink 1s linear infinite;
        }
        /*  */

        @media (max-width: 425px) {
            
            main {
                margin-top: 140px;
            }

            #avatar-container {
                width: 35%;
                height: 0;
                padding-bottom: 35%;
                position: relative;
                overflow: hidden;
            }

            #avatar-container img {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 50%;
            }

            #title-page {
                height: 40px;
            }

            #title-page input {
                font-size: 20px;
            }

            .link-container {
                padding-top: 28%;
            }
            
            .link-div {
                width: 85%;
            }
            
            .link-div img {
                width: 14%;
                height: auto;
            }
            
            .link-div a {
                font-size: 16px;
                height: auto;
            }
            
            #search-bar-container {
                display: flex;
                align-items: center;
                width: 70%;
                top: 0;
                left: 0;
                padding: 10px;
                background-color: rgba(248, 250, 251, 0.7);
                position: relative;
                margin-top: 13px;
            }
            
            #search-input {
                font-family: 'Tilt Warp', cursive;
                flex: 1;
                height: 30px;
                border-radius: 12px;
                border: none;
                padding-left: 40px;
                box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.49);
            }
            
            #search-icon {
                height: 14px;
                width: auto;
                margin-left: -44px;
                position: absolute;
                right: 15px;
            }

        }

        @media (min-width: 426px) and (max-width: 768px) {

            main {
                margin-top: 140px;
            }

            #avatar-container {
                width: 21%;
                height: 0;
                padding-bottom: 21%;
                position: relative;
                overflow: hidden;
            }

            #avatar-container img {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 50%;
            }

            #title-page {
                height: 45px;
            }

            #title-page input {
                font-size: 20px;
            }

            .link-container {
                padding-top: 18%;
            }
            
            .link-div {
                width: 60%;
            }
            
            .link-div img {
                width: 14%;
                height: auto;
            }
            
            .link-div a {
                font-size: 16px;
                height: auto;
            }
            
            #search-bar-container {
                display: flex;
                align-items: center;
                width: 50%;
                top: 0;
                left: 0;
                padding: 10px;
                background-color: rgba(248, 250, 251, 0.7);
                position: relative;
                margin-top: 13px;
            }
            
            #search-input {
                font-family: 'Tilt Warp', cursive;
                flex: 1;
                height: 30px;
                border-radius: 12px;
                border: none;
                padding-left: 40px;
                box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.49);
            }
            
            #search-icon {
                height: 14px;
                width: auto;
                margin-left: -44px;
                position: absolute;
                right: 15px;
            }

        }

        @media (min-width: 769px) and (max-width: 1024px) {

            main {
                margin-top: 140px;
            }

            #avatar-container {
                width: 18%;
                height: 0;
                padding-bottom: 18%;
                position: relative;
                overflow: hidden;
            }

            #avatar-container img {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 50%;
            }

            #title-page {
                width: 40%;
                height: 45px;
            }

            #title-page input {
                font-size: 20px;
            }

            .link-container {
                padding-top: 16%;
            }
            
            .link-div {
                width: 50%;
            }
            
            .link-div img {
                width: 12%;
                height: auto;
            }
            
            .link-div a {
                font-size: 18px;
                height: auto;
            }
            
            #search-bar-container {
                display: flex;
                align-items: center;
                width: 30%;
                top: 0;
                left: 0;
                padding: 10px;
                background-color: rgba(248, 250, 251, 0.7);
                position: relative;
                margin-top: 13px;
            }
            
            #search-input {
                font-family: 'Tilt Warp', cursive;
                flex: 1;
                height: 30px;
                border-radius: 12px;
                border: none;
                padding-left: 40px;
                box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.49);
            }
            
            #search-icon {
                height: 16px;
                width: auto;
                margin-left: -44px;
                position: absolute;
                right: 15px;
            }

        }

        @media (min-width: 1025px) {

            main {
                margin-top: 140px;
            }

            #avatar-container {
                width: 15%;
                height: 0;
                padding-bottom: 15%;
                position: relative;
                overflow: hidden;
            }

            #avatar-container img {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 50%;
            }

            #title-page {
                width: 40%;
                height: 50px;
            }

            #title-page input {
                font-size: 24px;
            }

            .link-container {
                padding-top: 14%;
            }
            
            .link-div {
                width: 50%;
            }
            
            .link-div img {
                width: 10%;
                height: auto;
            }
            
            .link-div a {
                font-size: 18px;
                height: auto;
            }
            
            #search-bar-container {
                display: flex;
                align-items: center;
                width: 30%;
                top: 0;
                left: 0;
                padding: 10px;
                background-color: rgba(248, 250, 251, 0.7);
                position: relative;
                margin-top: 13px;
            }
            
            #search-input {
                font-family: 'Tilt Warp', cursive;
                flex: 1;
                height: 30px;
                border-radius: 12px;
                border: none;
                padding-left: 40px;
                box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.49);
            }
            
            #search-icon {
                height: 18px;
                width: auto;
                margin-left: -44px;
                position: absolute;
                right: 15px;
            }

        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <link rel="icon" href="https://storage.googleapis.com/bitlink-image-source/BitLink%20Text.svg?GoogleAccessId=firebase-adminsdk-j7592%40bitlink-project.iam.gserviceaccount.com&Expires=16730323200&Signature=CbZRb3dllT%2FGoGIZEmGkpaEvAdyswnBgulO7K0q%2FHxZ%2BP8uPXZxIheHzLYycTbfsx6me83gpABkbWhhbRtNbNrSbWDmCnYryDJvRD4aQiChjLdUO7dwNaNCj9bm8ro%2FICMiCxfg5HPbB%2FG%2BPVhv1LxnFaccRpylbV3ccU8q4rTuPO6bhgsqxlrM8AJm1NTQBM52Pnugk9v4VrBH5C5BMmxltxv96GNBGjydfCoO4m5mNfyquuJHoxOdDjDMToUZ9lFIKf7miDUdzXT0eVBUneiRNK2jDMBevmttDxgMLARmSVQLtb4mq78po3VfDdzpEo4RHNwC53o1YNP409CgmNQ%3D%3D">
</head>
<body>
    <main>
        <div class="title-section">
            <div id="search-bar-container">
                <input type="text" id="search-input" placeholder="Search...">
                <img src="https://storage.googleapis.com/bitlink-image-source/fi-br-search.svg?GoogleAccessId=firebase-adminsdk-j7592%40bitlink-project.iam.gserviceaccount.com&Expires=16730323200&Signature=YutG5LW9d0bf9fnR5bLjv1zZQVO2tYrix08IEczmj3yivUUkuX5Bq1f6jP%2BkXXcJ%2FUmdeqLJe8dvFtXYJXLY5JNX0sVHzOyMoIVWDoluS2LHP0jfHdKVLbiLLqXndUFVo77nGoxN%2BURNdQ6rGujHrkzavF%2Brh4QQwf8nHVpN9oQhyES6Wymm1ZWDDUMhiIy%2F8VUe1VDSwvP%2FIugtIC1KoE4U04kXexEjNeNLr1UVWwucx1OO2dMSHBcSK4P8oOR%2Fe0h05y1VcOpOXa9lZztnbGaSrQaJ9V2zH0Ub3JpR4KHc%2FuYLQzzL%2FEByqEvWy%2F3ak3%2F3tvqEU9GKaZpDSds%2BMg%3D%3D" alt="Search" id="search-icon">
            </div>
            
            <input type="file" id="avatar-input" style="display: none">
            <div id="avatar-container">
                <img src="<%= previewData.avatarpage ? previewData.avatarpage : 'https://storage.googleapis.com/bitlink-image-source/ThumbnailDefault.svg?GoogleAccessId=firebase-adminsdk-j7592%40bitlink-project.iam.gserviceaccount.com&Expires=16730323200&Signature=CbUn4IwzLg3tcVhU91vPasQdq0nzOJGKJM1h1JKjNefowBdTbtfwmPxROtLYXM%2B4f0IlwSZmCz4LERYRdHQh3T8ywydqKbgJmV4zQmnBv092KKnR7lWaJxXpt36BESK4Ay%2FweP5RD9A%2B8NXbKAj9YaKSiiUIIr9bB2q81t%2BMtuC4nbm78iOGLe8Ua%2F%2FCDdm5QtD%2F8NrfXLjuFsG9PXj9hY81lEE7sqCLh8A%2FQ8kf5RbNh8m8Cg7Y9rtpEa9XmAqm3Gdh85uy1YdEBxmjmqh6%2B55K8aA3%2F03RiTCaN%2Fp3RYmj5AG7TRMEqXJMaTmhRx47NQMlerALHxgcd4lglvl%2FLw%3D%3D' %>" alt="Avatar" id="avatar-image">
            </div>
    
            <div id="title-page">
                <input id="title-label" type="text" value="<%= previewData.pageTitle ? previewData.pageTitle : 'BitLink Page.' %>" readonly>
            </div>
        </div>
    
        <div class="link-container">
            <% for (let key in previewData.links) { %>
                <% let link = previewData.links[key]; %>
                <div class="link-div">
                    <img src="<%= link.thumbnail_url %>" alt="<%= link.title %>">
                    <a href="<%= link.link %>">
                        <%= link.title %>
                    </a>
                </div>
            <% } %>
        </div>
    </main>
    <script>
        // Search
        $(document).ready(function(){
            $('#search-input').on('keyup', function(){
                var searchValue = $(this).val().toLowerCase();

                // Menghapus kelas blink dari semua elemen sebelum melakukan pencarian baru
                $('.link-div').removeClass("blink");

                if (searchValue !== "") {
                    $('.link-div').each(function(){
                        var inputValue = $(this).find('a').text().toLowerCase(); // Mengambil teks dari elemen a
                        var regex = new RegExp(searchValue);
                        if (regex.test(inputValue)) {
                            console.log(inputValue);
                            //Scroll ke elemen dan ubah warna latar belakang
                            var topPos = $(this).offset().top - 500; // -300 untuk memberi ruang di atas elemen
                            if($(window).scrollTop() !== topPos){
                                $('html, body').animate({
                                    scrollTop: topPos
                                }, 500);
                            }
                            $(this).addClass("blink"); // Menambahkan kelas blink
                        }
                    });
                }
            });
        });
        // ----
    </script>
</body>
</html>
